---
title: "ggplot2_from_regression"
author: "Anastasia Lianguzova"
date: "2025-09-30"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

---

class: middle, center, inverse

# Графики средствами пакета ggplot2

---

## Грамматика графиков

1. Откуда брать данные?
2. Какие переменные изображать на графике?
3. В виде чего изображать?
4. Какие подписи нужны?
5. Какую тему оформления нужно использовать?


Давайте поэтапно построим график

---

## С чего начинаются графики?

- `library(ggplot2)` --- активирует пакет ggplot2 со всеми его функциями
- `ggplot()` --- создает пустой "базовый" слой --- основу графика

```{r gg_base_1}
library(ggplot2)
ggplot()
```

---

## Откуда брать данные?

Обычно в основе графика пишут, откуда брать данные.

```{r gg_base_2}
ggplot(data = teeth)
```

---

## Какие переменные изображать на графике?

Эстетики --- это свойства будущих элементов графика, которые будут изображать данные (`x`, `y`, `colour`, `fill`, `size`, `shape`, и т.д.)

`aes()` --- функция, которая сопоставляет значения эстетик и переменные из источника данных (название происходит от англ. _aesthetics_)

```{r gg_aes}
ggplot(data = teeth, aes(x = c14, y = birth))
```

---

## В виде чего изображать?

Геомы --- графические элементы (`geom_point()`, `geom_line()`, `geom_bar()`, `geom_smooth()` и т.д., их очень много).

`geom_point()` --- точки.

```{r gg-point}
ggplot(data = teeth, aes(x = c14, y = birth)) + 
  geom_point()
```

---

## Подписи осей, заголовок и т.д.

Элемент `labs()` --- создает подписи. Аргументы --- это имена эстетик, например, `x`, `y` и т.д. Заголовок графика называется `title`


```{r gg-labs}
ggplot(data = teeth, aes(x = c14, y = birth)) + 
  geom_point() + 
  labs(x = 'Содержание нестабильного изотопа углерода, %', 
       y = 'Год рождения человека')
```

---

## Графики ggplot можно сохранять в переменные

```{r gg-var}
gg_teeth <- ggplot(data = teeth, aes(x = c14, y = birth)) + 
  geom_point() + 
  labs(x = 'Содержание нестабильного изотопа углерода, %', 
       y = 'Год рождения человека')
gg_teeth
```

---

## Темы оформления графиков можно менять и настраивать

`theme()` --- меняет отдельные элементы (см. справку)
`theme_bw()`, `theme_classic()` и т.д. --- стили оформления целиком

```{r gg-themes}
gg_teeth + theme_classic()
```

---

## Можно установить любимую тему для всех последующих графиков

```{r gg-theme-set}
theme_set(theme_bw())
gg_teeth
```

---

## Графики можно сохранять в файлы

Функция `ggsave()` позволяет сохранять графики в виде файлов во множестве разных форматов ("eps", "ps", "tex", "pdf", "jpeg", "tiff", "png", "bmp", "svg" или "wmf"). Параметры изображений настраиваются (см. справку)

```{r gg-save, eval=FALSE}
ggsave(filename = 'teeth_c14.png', plot = gg_teeth)
ggsave(filename = 'teeth_c14.pdf', plot = gg_teeth)
```
